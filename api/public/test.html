<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>test</title>

</head>
<body>

<input type="file" id="u_file">
<button type="button">u 上传</button>

<script>
    'use strict';

    const uFile = document.querySelector('#u_file');
    uFile.onchange = (e) => {
        const tar = e.currentTarget;
        const files = tar.files;
        if (files.length <= 0) {
            return ;
        }
        const file = files[0];
        const size = 100 * 1024 * 1024;
        const chunk = file.slice(0 , Math.min(file.size , size));
        const formData = new FormData();
        formData.append('name' , file.name);
        formData.append('size' , file.size);
        formData.append('total' , 10);
        formData.append('index' , 1);
        formData.append('file' , chunk);

        fetch('http://api.xq.test/api/admin/upload_video' , {
            method: 'post' ,
            mode: 'cors' ,
            body: formData ,
        })
            .then((res) => {
                return res.text();
            })
            .then((res) => {
                console.log('response' , res);
            })
            .catch((err) => {
                console.log('error' , err);
            })
    };
</script>

</body>
</html>
